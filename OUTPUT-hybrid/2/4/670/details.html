<html><h3>66de7491bd7e16a072e2d1302df1f88c277dae2e,adding_problem_100/rwa_model/train.py,,,#,25
</h3><img src='869565.png'><BR><BR><BR><link rel="stylesheet" href="../../../../default.css">
<script src="../../../../highlight.pack.js"></script> 
<script>hljs.initHighlightingOnLoad();</script>
<html><h3></h3><h3>Before Change</h3><pre><code class='java'>
&#47&#47 Evaluate performance
&#47&#47
correct = tf.equal(tf.round(py), tf.round(y))
<a id="change">accuracy = 100.0*tf.reduce_mean(tf.cast(correct, tf.float32))</a>

&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47
&#47&#47 Train
&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47&#47

&#47&#47 Operation to initialize session
&#47&#47
initializer = tf.global_variables_initializer()

&#47&#47 Open session
&#47&#47
with tf.Session() as session:

	&#47&#47 Initialize variables
	&#47&#47
	session.run(initializer)

	&#47&#47 Each training session represents one batch
	&#47&#47
	for iteration in range(num_iterations):

		&#47&#47 Grab a batch of training data
		&#47&#47
		xs, ls, ys = dp.train.batch(batch_size)
		feed = {x: xs, l: ls, y: ys}

		&#47&#47 Update parameters
		&#47&#47
		out = session.run((cost, accuracy, optimizer), feed_dict=feed)
		print(&quotIteration:&quot, iteration, &quotDataset:&quot, &quottrain&quot, &quotCost:&quot, <a id="change">out[0]</a>/np.log(2.0), &quotAccuracy:&quot, out[1])

		&#47&#47 Periodically run model on test data
		&#47&#47</code></pre><h3>After Change</h3><pre><code class='java'>
			&#47&#47 Run model
			&#47&#47
			out = session.run(cost, feed_dict=feed)
			<a id="change">print(&quotIteration:&quot, iteration, &quotDataset:&quot, &quottest&quot, &quotCost:&quot, out)</a>

	&#47&#47 Save the trained model
	&#47&#47
	os.makedirs(&quotbin&quot, exist_ok=True)</code></pre><div id='inPattern'>In pattern: SUPERPATTERN</div><BR><div id='frequency'>Frequency: 3</div><BR><div id='size'>Non-data size: 3</div><BR><h3>Instances</h3><BR><div id='link'><a href='https://github.com/jostmey/rwa/commit/66de7491bd7e16a072e2d1302df1f88c277dae2e#diff-27e421b87f69b4c02403a4485730123bcdcab610493aba32ffafc40b53c2e5b8L34' target='_blank'>Link</a></div><div id='project'> Project Name: jostmey/rwa</div><div id='commit'> Commit Name: 66de7491bd7e16a072e2d1302df1f88c277dae2e</div><div id='time'> Time: </div><div id='author'> Author: null</div><div id='file'> File Name: adding_problem_100/rwa_model/train.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/chuyangliu/snake/commit/7e799d025a71b84c844253e22e15cee7060975d6#diff-d6af0459a37d985953d7040c14f53feb3b9cc9e58b543aa3c2b80256d276c5e0L9' target='_blank'>Link</a></div><div id='project'> Project Name: chuyangliu/snake</div><div id='commit'> Commit Name: 7e799d025a71b84c844253e22e15cee7060975d6</div><div id='time'> Time: </div><div id='author'> Author: null</div><div id='file'> File Name: run.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: </div><BR><BR><div id='link'><a href='https://github.com/deepmipt/DeepPavlov/commit/29ee3e34123191e7b444915b6be56edd8699aa36#diff-fd05ed9f3d6abaeb98aa453ae7ed34a7798636769df37330f5e2aa73157351f4L104' target='_blank'>Link</a></div><div id='project'> Project Name: deepmipt/DeepPavlov</div><div id='commit'> Commit Name: 29ee3e34123191e7b444915b6be56edd8699aa36</div><div id='time'> Time: </div><div id='author'> Author: null</div><div id='file'> File Name: deeppavlov/core/commands/infer.py</div><div id='class'> Class Name: </div><div id='method'> Method Name: interact_model</div><BR>